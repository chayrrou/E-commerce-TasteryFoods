<nav class="navbar justify-content-end" style="background-color:tomato;height: 64px;">
  <div class="mx-5" style="font-size: 20px;">
    <i class="bi bi-person-circle"></i>
  </div>
</nav>
<div class="container">
  <div class="d-flex justify-content-center m-4">
    <h1>Public Profile & Account Setting</h1>
  </div>
  <div class="box m-4 justify-content-center">
    <div class="profile-container">
      <mat-card class="profile-card">
        <div class="profile-header ">
          <div class="avatar-container mb-2">
    <img src={{imagePreviewUrl}}
         alt="Profile Photo" 
         class="rounded-circle" 
         style="width:120px; height:120px; object-fit: cover;">
    <ng-template #defaultImage>
      <div class="example-header-image rounded-circle" 
           style="width:120px; height:120px; background-color:#ccc;">
      </div>
    </ng-template>
  </div>
          <div class="role-badge  mb-2">
            <span class="badge bg-primary">{{ user?.role || 'User' }}</span>
          </div>
          <mat-card-title class="name">{{ user?.name || 'Loading...' }}</mat-card-title>
          <mat-card-subtitle class="email">{{ user?.email || '' }}</mat-card-subtitle>
        </div>
        <mat-card-actions class="text-center mt-3">
          <input type="file" (change)="onFileSelected($event)" accept="image/*" hidden #fileInput>
          <button mat-raised-button color="warn" (click)="fileInput.click()">
            <i class="bi bi-camera-fill me-2"></i>Update Photo
          </button>
          <button *ngIf="selectedFile" mat-raised-button color="primary" class="ms-2" (click)="fileInput.click()">
            <i class="bi bi-upload me-2"></i>Upload Photo
          </button>
        </mat-card-actions>

       
        <div class="profile-stats">
          <div class="stat-item">
            <div class="stat-value">12</div>
            <div class="stat-label">Products</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">24</div>
            <div class="stat-label">Orders</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">4.8</div>
            <div class="stat-label">Rating</div>
          </div>
        </div>
      </mat-card>

      <mat-card class="settings-card">
        <mat-card-header>
          <mat-card-title>
            <i class="bi bi-gear-fill me-2"></i>Account Settings
          </mat-card-title>
          <mat-card-subtitle>Manage your profile information</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <form  *ngIf="settingForm"  [formGroup]="settingForm" (ngSubmit)="onUpdate()">
            <div class="form-group">
              <label>Full Name</label>
              <input id="setting-form-txt" class="setting-form-txt" placeholder="Your Name" formControlName="name">
              <small class="form-text text-muted">This will be displayed publicly</small>
            </div>
            
            <div class="form-group">
              <label>Email</label>
              <input class="setting-form-txt" placeholder="Your Email" formControlName="email">
              <small class="form-text text-muted">We'll never share your email</small>
            </div>
            
            <div class="form-group">
              <label>Current Password</label>
              <div class="input-container">
                <input [type]="hideCurrent ? 'password' : 'text'" class="setting-form-txt" placeholder="Current Password" formControlName="password">
                <span class="eyeIcon" (click)="hideCurrent = !hideCurrent">
                  <i [ngClass]="hideCurrent ? 'bi bi-eye-slash-fill' : 'bi bi-eye-fill'"></i>
                </span>
              </div>
            </div>
    
            <mat-card-actions class="d-flex justify-content-end">
              <button mat-raised-button color="warn" class="button" [disabled]="settingForm.invalid">
                <i class="bi bi-save-fill me-2"></i>Save Changes
              </button>
            </mat-card-actions>
          </form>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>